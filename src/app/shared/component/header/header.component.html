<header class="header">
    <div class="header-bottom sticky-header">
        <div class="container">
            <div class="header-left">
                <button class="mobile-menu-toggler">
                    <span class="sr-only">Toggle mobile menu</span>
                    <i class="icon-bars"></i>
                </button>

                <a [routerLink]="'/home'" class="logo">
                    <img src="assets/images/Logo/logo.png" alt="Molla Logo" width="85" height="23" />
                </a>
            </div>
            <div class="header-center">
                <nav class="main-nav">
                    <ul class="menu sf-arrows">
                        <li class="megamenu-container">
                            <a [routerLink]="'/home'">Trang chủ</a>
                        </li>
                        <li>
                            <a class="sf-with-ul" [routerLink]="'/list'">Sản phẩm</a>
                            <ul>
                                <li *ngFor="let item of categories">
                                    <a [routerLink]="['/list/', item.id]">{{ item.name }}</a>
                                </li>
                            </ul>
                        </li>
                        <li><a href="blog.html">Tin tức</a></li>
                        <li><a href="blog.html">Giới thiệu</a></li>
                        <li><a href="blog.html">Liên hệ</a></li>
                    </ul>
                    <!-- End .menu -->
                </nav>
                <!-- End .main-nav -->
            </div>
            <!-- End .header-left -->

            <div class="header-right">
                <div class="header-search">
                    <a href="#" class="search-toggle" role="button"><i class="icon-search"></i></a>
                    <form action="#" method="get">
                        <div class="header-search-wrapper">
                            <label for="q" class="sr-only">Tìm kiếm</label>
                            <input type="search" class="form-control" name="q" id="q"
                                placeholder="Nhập từ khóa tìm kiếm" required />
                        </div>
                        <!-- End .header-search-wrapper -->
                    </form>
                </div>
                <!-- End .header-search -->

                <!-- user -->
                <div class="dropdown cart-dropdown" *ngIf="!user">
                    <a [routerLink]="['/login']" class="dropdown-toggle" role="button" data-toggle="dropdown" aria-haspopup="true"
                        aria-expanded="false" data-display="static">
                        <i class="icon-user"></i>
                    </a>
                    <div class="dropdown-menu dropdown-menu-right">
                        <div class="dropdown-cart-action">
                            <a [routerLink]="'/login'" class="btn btn-primary">Đăng nhập</a>
                            <a [routerLink]="'/register'" class="btn btn-dark">Đăng ký</a>
                        </div>
                        <!-- End .dropdown-user -->
                    </div>
                </div>
                <div class="dropdown cart-dropdown" *ngIf="user">
                    <a [routerLink]="['/account']" class="dropdown-toggle" role="button" data-toggle="dropdown" aria-haspopup="true"
                        aria-expanded="false" data-display="static">
                        <i class="icon-user"></i>
                    </a>
                    <div class="dropdown-menu dropdown-menu-right">
                        <p>Xin chào, {{ user.name }}</p>
                        <div class="dropdown-cart-action">
                            <a [routerLink]="'/account/profile'" class="btn btn-primary">Tài khoản</a>
                            <a  [routerLink]="'/login'" (click)="logout()" class="btn btn-dark">Đăng xuất</a>
                        </div>
                        <!-- End .dropdown-user -->
                    </div>
                </div>
                <!-- End user -->
                
                <div class="dropdown cart-dropdown">
                    <a [routerLink]="['/cart']" class="dropdown-toggle" role="button" data-toggle="dropdown" aria-haspopup="true"
                        aria-expanded="false" data-display="static">
                        <i class="icon-shopping-cart"></i>
                        <span class="cart-count">{{ sum }}</span>
                    </a>
                    <div class="dropdown-menu dropdown-menu-right">
                        <div class="dropdown-cart-products">
                            <div class="product" *ngFor="let item of items">
                                <div class="product-cart-details">
                                    <h4 class="product-title">
                                        <a [routerLink]="['detail/', item.product.id]">{{ item.product.name }}</a>
                                    </h4>

                                    <span class="cart-product-info">
                                        <span class="cart-product-qty">{{ item.quantity }}</span>
                                        x {{ item.product.price  | currency: "VND"}}
                                    </span>
                                </div>
                                <!-- End .product-cart-details -->

                                <figure class="product-image-container">
                                    <a [routerLink]="['detail/', item.product.id]" class="product-image">
                                        <img src="assets/{{ item.product.avatarImage }}" alt="product" />
                                    </a>
                                </figure>
                                <a class="btn-remove" (click)="_cart.deleteItem(item.product.id)" title="Remove Product"><i class="icon-close"></i></a>
                            </div>
                            <!-- End .product -->
                        </div>
                        <!-- End .cart-product -->

                        <div class="dropdown-cart-total">
                            <span>Tổng:</span>

                            <span class="cart-total-price">{{ total | currency: "VND" }}</span>
                        </div>
                        <!-- End .dropdown-cart-total -->

                        <div class="dropdown-cart-action">
                            <a [routerLink]="'/cart'" class="btn btn-primary">Đến giỏ hàng</a>
                            <a [routerLink]="'/checkout'" class="btn btn-outline-primary-2"><span>Thanh toán</span><i
                                    class="icon-long-arrow-right"></i></a>
                        </div>
                        <!-- End .dropdown-cart-total -->
                    </div>
                    <!-- End .dropdown-menu -->
                </div>
                <!-- End .cart-dropdown -->

            </div>
            <!-- End .header-right -->
        </div>
        <!-- End .container -->
    </div>
    <!-- End .header-bottom -->
</header>
<!-- End .header -->

<!-- Mobile Menu -->
<div class="mobile-menu-overlay"></div>
<!-- End .mobil-menu-overlay -->

<div class="mobile-menu-container">
    <div class="mobile-menu-wrapper">
        <span class="mobile-menu-close"><i class="icon-close"></i></span>

        <form action="#" method="get" class="mobile-search">
            <label for="mobile-search" class="sr-only">Tìm kiếm</label>
            <input type="search" class="form-control" name="mobile-search" id="mobile-search"
                placeholder="Tìm kiếm với từ khóa" required />
            <button class="btn btn-primary" type="submit">
                <i class="icon-search"></i>
            </button>
        </form>

        <nav class="mobile-nav">
            <ul class="mobile-menu">
                <li class="active">
                    <a href="index.html">Trang chủ</a>
                </li>
                <li>
                    <a class="sf-with-ul" [routerLink]="'/list'">Sản phẩm</a>
                    <ul>
                        <li *ngFor="let item of categories">
                            <a [routerLink]="['list/', item.id]">{{ item.name }}</a>
                        </li>
                    </ul>
                </li>
                <li><a href="blog.html" class="sf-with-ul">Tin tức</a></li>
                <li><a href="blog.html" class="sf-with-ul">Giới thiệu</a></li>
                <li><a href="blog.html" class="sf-with-ul">Liên hệ</a></li>
            </ul>
        </nav>
        <!-- End .mobile-nav -->

        <div class="social-icons">
            <a href="#" class="social-icon" target="_blank" title="Facebook"><i class="icon-facebook-f"></i></a>
            <a href="#" class="social-icon" target="_blank" title="Twitter"><i class="icon-twitter"></i></a>
            <a href="#" class="social-icon" target="_blank" title="Instagram"><i class="icon-instagram"></i></a>
            <a href="#" class="social-icon" target="_blank" title="Youtube"><i class="icon-youtube"></i></a>
        </div>
        <!-- End .social-icons -->
    </div>
    <!-- End .mobile-menu-wrapper -->
</div>
<!-- End .mobile-menu-container -->